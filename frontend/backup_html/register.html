<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Register â€“ TrustraCapital</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-gray-100 font-sans min-h-screen flex items-center justify-center">

<div class="bg-gray-900 p-10 rounded-2xl shadow-xl w-full max-w-md">
  <h1 class="text-3xl font-bold text-indigo-400 mb-6 text-center">Create Account</h1>
  <form id="registerForm" class="flex flex-col gap-4">
    <input type="text" name="name" placeholder="Full Name" required class="p-3 rounded-lg bg-gray-800 border border-gray-700"/>
    <input type="email" name="email" placeholder="Email" required class="p-3 rounded-lg bg-gray-800 border border-gray-700"/>
    <input type="password" name="password" placeholder="Password" required class="p-3 rounded-lg bg-gray-800 border border-gray-700"/>
    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 p-3 rounded-lg font-bold">Register</button>
  </form>
  <p class="mt-4 text-gray-400 text-sm text-center">
    Already have an account? <a href="login.html" class="text-indigo-400">Login</a>
  </p>
  <p id="registerMsg" class="mt-3 text-center text-red-500"></p>
</div>

<script>
document.getElementById('registerForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = e.target;
  const data = {
    name: form.name.value,
    email: form.email.value,
    password: form.password.value
  };
  try {
    const res = await fetch('/api/auth/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    const result = await res.json();
    if(res.ok){
      localStorage.setItem('token', result.token); // store JWT
      window.location.href = 'dashboard.html';
    } else {
      document.getElementById('registerMsg').textContent = result.message || 'Registration failed';
    }
  } catch (err) {
    document.getElementById('registerMsg').textContent = 'Server error';
  }
});
</script>

</body>
</html>
